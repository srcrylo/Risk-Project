<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Testing</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="navbar">
      <div class="dropdown nav-element">
        <div class="dropdown-tile">Access Lists</div>
        <div id="acc-lists" class="dropdown-options">
          <div class="dropdown-opt" onclick="displaySection('newhire');">
            New Hire
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt" onclick="displaySection('transfer')">
            Transfer
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt" onclick="displaySection('promo')">
            Promotion
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt" onclick="displaySection('term')">
            Termination
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt" onclick="displaySection('rehire')">
            Rehire
          </div>
        </div>
      </div>
      <div class="vr"></div>
      <div class="dropdown nav-element">
        <div class="dropdown-tile">List Admin</div>
        <div class="dropdown-options">
          <div class="dropdown-opt">
            <div class="dropdown-opt-tile">Create</div>
            <div class="dropdown-subs">
              <div class="dropdown-opt" onclick="displaySection('create-tool')">Create Tool</div>
              <hr class="dropdown-divider" />
              <div class="dropdown-opt" onclick="displaySection('create-job-entry')">Create Title</div>
            </div>
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt">
            <div class="dropdown-opt-tile">Read</div>
            <div class="dropdown-subs">
              <div class="dropdown-opt" onclick="displaySection('read-jobs')">All Jobs</div>
              <hr class="dropdown-divider" />
              <div class="dropdown-opt" onclick="displaySection('read-jobs-location')">Jobs (Location)</div>
              <hr class="dropdown-divider" />
              <div class="dropdown-opt" onclick="displaySection('read-tools')">All Tools</div>
              
            </div>
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt">
            <div class="dropdown-opt-tile">Update</div>
            <div class="dropdown-subs">
              <div class="dropdown-opt" onclick="displaySection('update-entry')">Update Entry</div>
            </div>
          </div>
          <hr class="dropdown-divider" />
          <div class="dropdown-opt">
            <div class="dropdown-opt-tile">Delete</div>
            <div class="dropdown-subs">
              <div class="dropdown-opt" onclick="displaySection('delete-tool')">Delete Tool</div>
              <hr class="dropdown-divider" />
              <div class="dropdown-opt" onclick="displaySection('delete-title')">Delete Title</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="wrapall">
      <div id="newhire" class="nh-wrap alist">
        <div class="container wrapnh">
          <div class="wrap">
            <div class="main-tile newhire">New Hire</div>
            <div class="selects">
              <select class="sel sel-left" id="nh-loc">
                <option>Option</option>
                <option>Option</option>
                <option>Option</option>
              </select>
              <select class="sel sel-right" id="nh-title">
                <option>Option</option>
                <option>Option</option>
                <option>Option</option>
              </select>
            </div>
            <div class="nh-tools" id="nh-tools"></div>
          </div>
        </div>
        <div id="nh-overlay" class="overlay container nhtile alist">
          <div id="nh-overlay-title" class="main-tile newhire"></div>
          <div class="spacer2rem"></div>
          <div class="nh-tools" id="nh-overlay-content"></div>
        </div>
      </div>
      <div id="transfer" class="tr-wrap alist">
        <div class="container tr-left">
          <div class="main-tile transfer">Transfer</div>
          <div class="selects">
            <select class="sel sel-left" id="tr-loc1"></select>
            <select class="sel sel-right" id="tr-title1"></select>
            <select class="sel sel-right" id="tr-loc2"></select>
            <select class="sel sel-right" id="tr-title2"></select>
          </div>
          <div id="tr-tools" class="">
            <div id="tr-add" class="add container-rel">
              <p class="addtip container-rel">Add</p>
            </div>
            <div id="tr-remove" class="remove container-rel">
              <p class="removetip container-rel">Remove</p>
            </div>
            <div id="tr-change" class="change container-rel">
              <p class="changetip container-rel">Change</p>
            </div>
          </div>
        </div>
        <div id="tr-overlay" class="">
          <div id="tr-overlay-title" class="main-tile"></div>
          <div id="tr-overlay-content" class="overlay-tile nhtile"></div>
        </div>
      </div>
      <div id="promo" class="container alist">
        <div class="main-tile promo">Promotion</div>
        <div class="selects">
          <select class="sel sel-left" id="pr-loc"></select>
          <select class="sel sel-right" id="pr-frtitle"></select>
          <select class="sel sel-right" id="pr-totitle"></select>
        </div>
        <div id="pr-tools" class="">
          <div id="pr-add" class="add container-rel">
            <p class="addtip container-rel">Add</p>
          </div>
          <div id="pr-remove" class="remove container-rel">
            <p class="removetip container-rel">Remove</p>
          </div>
          <div id="pr-change" class="change container-rel">
            <p class="changetip container-rel">Change</p>
          </div>
        </div>
      </div>
      <div id="ter-wrap">
        <div id="term" class="container alist">
          <div class="main-tile term">Termination</div>
          <div class="selects">
            <select class="sel sel-left" id="ter-loc">
              <option>Option</option>
              <option>Option</option>
              <option>Option</option>
            </select>
            <select class="sel sel-right" id="ter-title">
              <option>Option</option>
              <option>Option</option>
              <option>Option</option>
            </select>
          </div>
          <div class="ter-tools" id="ter-tools"></div>
        </div>
        <div id="ter-store-info" class="container alist ter-store-info">
          <p class="container pt">Disable in AD</p>
          <p class="container pt">Change AD Description</p>
          <p class="container pt">Hide from GAL</p>
          <p class="container pt">Remove from Groups in AD</p>
          <p class="container pt">Initiate & Block Sign Out</p>
          <p class="container pt">Reset PW</p>
          <p class="container pt">Remove Auto Reply</p>
          <p class="container pt">Set Email FW</p>
          <p class="container pt">Convert to Shared</p>
          <p class="container pt">Remove O365 License</p>
        </div>
      </div>
      <div id="rehire" class="re-wrap alist">
        <div class="container wrapnh">
          <div class="wrap">
            <div class="main-tile newhire">Rehire</div>
            <div class="selects">
              <select class="sel sel-left" id="re-loc">
                <option>Option</option>
                <option>Option</option>
                <option>Option</option>
              </select>
              <select class="sel sel-right" id="re-title">
                <option>Option</option>
                <option>Option</option>
                <option>Option</option>
              </select>
            </div>
            <div class="re-tools" id="re-tools"></div>
          </div>
        </div>
        <div id="re-overlay" class="overlay container nhtile alist">
          <div id="re-overlay-title" class="main-tile newhire"></div>
          <div class="spacer2rem"></div>
          <div class="nh-tools" id="re-overlay-content"></div>
        </div>
      </div>
      <div id="create-tool" class="alist container">
        <div class="">
        <div class="container tile-title">Create Job Tool</div>
        <div class="container tile-group">
          <input type="text" id="cr-jt-text" placeholder="Tool name..."/>
          <button id="cr-jt-sub">Submit</button>
        </div>
        
        </div>
      </div>
      <div id="create-job-entry" class="alist container">
        <div>
          <div class="container tile-title">Create Job Entry</div>
          <div class="container tile-group">
            <div class="text-horizontal">
              <input type="text" id="cr-jtitle-text1" placeholder="Location..." />
              <input type="text" id="cr-jtitle-text2" placeholder="Job Title... " />
            </div>
            <button id="cr-jtitle-sub">Submit</button>
          </div>
        </div>
      </div>
      <div id="read-jobs" class="alist container">
        <div class="container tile-title">Read All Job Titles</div>
        <div class="container tile-group three-column" id="read-jobs-cont"></div>
      </div>
      <div id="read-jobs-location" class="alist container">
        <div class="container tile-title">Read Job Titles by Location</div>
        <div class="container tile-group">
          <select id="read-jobs-location-select"></select>
        </div>
        <div class="container tile-group three-column" id="read-jobs-location-cont"></div>
      </div>
      <div id="read-tools" class="alist container">
        <div class="container tile-title">Read All Tools</div>
        <div class="container three-column" id="read-tools-cont"></div>
      </div>
      <div id="update-entry" class="alist container">
        <div class="container tile-title">Update Job Title Access List</div>
        <div class="container flex-row">
          <select id="update-loc" class="update-sel"></select>
          <select id="update-title" class="update-sel"></select>
        </div>
        <div class="container four-column" id="update-checks"></div>
        <button id="update-sub">Submit</button>
      </div>
      <div id="delete-tool" class="alist container">
        <div class="container tile-title">Delete Tool</div>
        <div class="container tile-group">
        <select id="delete-tool-sel"></select>
        <button id="delete-tool-sub">Submit</button>
        </div>
      </div>
      <div id="delete-title" class="alist container">
        <div class="container tile-title" id="del-title">Delete Title</div>
        <div class="container flex-row">
          <select id="delete-title-loc" class="update-sel"></select>
          <select id="delete-title-title" class="update-sel"></select>
        </div>
        <button id="delete-title-sub">Submit</button>
      </div>
    </div>
    <script>
      // New Hire
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const locations = document.getElementById("nh-loc");
          locations.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            console.log("adding loc: ", loc);
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            locations.appendChild(opt);
          });
        });
      document.getElementById("nh-loc").addEventListener("change", function () {
        const location = this.value;
        fetch("http://10.200.1.172:8000/jobs/" + location)
          .then((res) => res.json())
          .then((data) => {
            const jobSelect = document.getElementById("nh-title");
            jobSelect.innerHTML = '<option value="">--Select--</option>';
            data.forEach((job) => {
              console.log("adding job: ", job);
              let opt = document.createElement("option");
              opt.value = job;
              opt.textContent = job;
              jobSelect.appendChild(opt);
            });
          });
      });
      document
        .getElementById("nh-title")
        .addEventListener("change", function () {
          const job = document.getElementById("nh-title").value;
          const loc = document.getElementById("nh-loc").value;

          fetch("http://10.200.1.172:8000/tools?job=" + job + "&loc=" + loc)
            .then((res) => res.json())
            .then((tools) => {
              const container = document.getElementById("nh-tools");
              container.innerHTML = "";
              tools.forEach((tool) => {
                const p = document.createElement("p");
                p.textContent = tool;
                p.classList.add("pt");
                p.classList.add("container");
                p.classList.add("nhtile");
                p.addEventListener("click", () => {
                  p.classList.toggle("selected");
                });
                container.appendChild(p);
              });
            });
          fetch("http://10.200.1.172:8000/store-info/" + loc)
            .then((re) => re.json())
            .then((info) => {
              const title = document.getElementById("nh-overlay-title");
              title.innerHTML = "Store Info";
              const cont = document.getElementById("nh-overlay-content");
              cont.innerHTML = "";
              cont.style.display = "block";
              info.forEach((inf) => {
                const p = document.createElement("p");
                p.textContent = inf;
                p.classList.add("pt");
                p.classList.add("container");
                p.classList.add("nhtile");
                cont.appendChild(p);
              });
            });
          document.getElementById("nh-overlay").classList.add("active");
        });

      // Transfer
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const tl = document.getElementById("tr-loc1");
          tl.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            console.log("adding loc: ", loc);
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            tl.appendChild(opt);
          });
        });
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const fl = document.getElementById("tr-loc2");
          fl.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            console.log("adding loc: ", loc);
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            fl.appendChild(opt);
          });
        });
      document
        .getElementById("tr-loc1")
        .addEventListener("change", function () {
          const location = this.value;
          fetch("http://10.200.1.172:8000/jobs/" + location)
            .then((res) => res.json())
            .then((data) => {
              const jobSelect = document.getElementById("tr-title1");
              jobSelect.innerHTML = '<option value="">--Select--</option>';
              data.forEach((job) => {
                console.log("adding job: ", job);
                let opt = document.createElement("option");
                opt.value = job;
                opt.textContent = job;
                jobSelect.appendChild(opt);
              });
            });
        });
      document
        .getElementById("tr-loc2")
        .addEventListener("change", function () {
          const location = this.value;
          fetch("http://10.200.1.172:8000/jobs/" + location)
            .then((res) => res.json())
            .then((data) => {
              const jobSelect = document.getElementById("tr-title2");
              jobSelect.innerHTML = '<option value="">--Select--</option>';
              data.forEach((job) => {
                console.log("adding job: ", job);
                let opt = document.createElement("option");
                opt.value = job;
                opt.textContent = job;
                jobSelect.appendChild(opt);
              });
            });
        });
      document
        .getElementById("tr-title2")
        .addEventListener("change", function () {
          const fromLoc = document.getElementById("tr-loc1").value;
          const fromTitle = document.getElementById("tr-title1").value;
          const toLoc = document.getElementById("tr-loc2").value;
          const toTitle = document.getElementById("tr-title2").value;
          fetch(
            "http://10.200.1.172:8000/addtools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const add = document.getElementById("tr-add");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container-rel");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                add.appendChild(t);
              });
            });
          fetch(
            "http://10.200.1.172:8000/removetools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const remove = document.getElementById("tr-remove");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container-rel");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                remove.appendChild(t);
              });
              document.getElementById("tr-tools").style.display = "flex";
              document.getElementById("tr-overlay").style.display = "flex";
            });
          fetch(
            "http://10.200.1.172:8000/changetools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const remove = document.getElementById("tr-change");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container-rel");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                remove.appendChild(t);
              });
            });
          fetch(
            "http://10.200.1.172:8000/store-info/" +
              document.getElementById("tr-loc2").value
          )
            .then((re) => re.json())
            .then((info) => {
              const title = document.getElementById("tr-overlay-title");
              title.innerHTML = "Store Info";
              const cont = document.getElementById("tr-overlay-content");
              cont.innerHTML = "";
              cont.style.display = "block";
              info.forEach((inf) => {
                const p = document.createElement("p");
                p.textContent = inf;
                p.classList.add("pt");
                p.classList.add("container");
                cont.appendChild(p);
              });
            });
          document.getElementById("tr-overlay").classList.add("active");
        });
      function displaySection(section) {

        document.querySelectorAll(".alist").forEach((div) => {
          div.classList.remove("active");
        });

        document.getElementById(section).classList.add("active");
      }
      // Promotion
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const fl = document.getElementById("pr-loc");
          fl.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            fl.appendChild(opt);
          });
        });
      document.getElementById("pr-loc").addEventListener("change", function () {
        const location = this.value;
        fetch("http://10.200.1.172:8000/jobs/" + location)
          .then((res) => res.json())
          .then((data) => {
            const jobSelect = document.getElementById("pr-frtitle");
            const toSel = document.getElementById("pr-totitle");
            jobSelect.innerHTML = '<option value="">--Select--</option>';
            data.forEach((job) => {
              console.log("adding job: ", job);
              let opt = document.createElement("option");
              opt.value = job;
              opt.textContent = job;
              jobSelect.appendChild(opt);
            });
            toSel.innerHTML = jobSelect.innerHTML;
          });
      });
      document
        .getElementById("pr-totitle")
        .addEventListener("change", function () {
          const fromLoc = document.getElementById("pr-loc").value;
          const fromTitle = document.getElementById("pr-frtitle").value;
          const toLoc = document.getElementById("pr-loc").value;
          const toTitle = document.getElementById("pr-totitle").value;
          fetch(
            "http://10.200.1.172:8000/addtools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const add = document.getElementById("pr-add");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                add.appendChild(t);
              });
            });
          fetch(
            "http://10.200.1.172:8000/removetools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const remove = document.getElementById("pr-remove");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                remove.appendChild(t);
              });
            });
          fetch(
            "http://10.200.1.172:8000/changetools?ft=" +
              fromTitle +
              "&fl=" +
              fromLoc +
              "&tt=" +
              toTitle +
              "&tl=" +
              toLoc
          )
            .then((res) => res.json())
            .then((data) => {
              const remove = document.getElementById("pr-change");
              data.forEach((tool) => {
                let t = document.createElement("p");
                t.textContent = tool;
                t.classList.add("tool");
                t.classList.add("container");
                t.addEventListener("click", () => {
                  t.classList.toggle("selected");
                });
                remove.appendChild(t);
              });
              document.getElementById("pr-tools").style.display = "flex";
            });
        });
      // Termination
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const locations = document.getElementById("ter-loc");
          locations.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            console.log("adding loc: ", loc);
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            locations.appendChild(opt);
          });
        });
      document
        .getElementById("ter-loc")
        .addEventListener("change", function () {
          const location = this.value;
          fetch("http://10.200.1.172:8000/jobs/" + location)
            .then((res) => res.json())
            .then((data) => {
              const jobSelect = document.getElementById("ter-title");
              jobSelect.innerHTML = '<option value="">--Select--</option>';
              data.forEach((job) => {
                console.log("adding job: ", job);
                let opt = document.createElement("option");
                opt.value = job;
                opt.textContent = job;
                jobSelect.appendChild(opt);
              });
            });
        });
      document
        .getElementById("ter-title")
        .addEventListener("change", function () {
          const job = document.getElementById("ter-title").value;
          const loc = document.getElementById("ter-loc").value;

          fetch("http://10.200.1.172:8000/tools?job=" + job + "&loc=" + loc)
            .then((res) => res.json())
            .then((tools) => {
              const container = document.getElementById("ter-tools");
              container.innerHTML = "";
              tools.forEach((tool) => {
                const p = document.createElement("p");
                p.textContent = tool;
                p.classList.add("pt");
                p.classList.add("container");
                p.classList.add("nhtile");
                p.addEventListener("click", () => {
                  p.classList.toggle("selected");
                });
                container.appendChild(p);
              });
            });
          document.getElementById("ter-store-info").style.display = "flex";
        });
      // Rehire
      fetch("http://10.200.1.172:8000/locations")
        .then((res) => res.json())
        .then((data) => {
          const locations = document.getElementById("re-loc");
          locations.innerHTML = '<option value="">--Select--</option>';
          data.forEach((loc) => {
            console.log("adding loc: ", loc);
            let opt = document.createElement("option");
            opt.value = loc;
            opt.textContent = loc;
            locations.appendChild(opt);
          });
        });
      document.getElementById("re-loc").addEventListener("change", function () {
        const location = this.value;
        fetch("http://10.200.1.172:8000/jobs/" + location)
          .then((res) => res.json())
          .then((data) => {
            const jobSelect = document.getElementById("re-title");
            jobSelect.innerHTML = '<option value="">--Select--</option>';
            data.forEach((job) => {
              console.log("adding job: ", job);
              let opt = document.createElement("option");
              opt.value = job;
              opt.textContent = job;
              jobSelect.appendChild(opt);
            });
          });
      });
      document
        .getElementById("re-title")
        .addEventListener("change", function () {
          const job = document.getElementById("re-title").value;
          const loc = document.getElementById("re-loc").value;

          fetch("http://10.200.1.172:8000/tools?job=" + job + "&loc=" + loc)
            .then((res) => res.json())
            .then((tools) => {
              const container = document.getElementById("re-tools");
              container.innerHTML = "";
              tools.forEach((tool) => {
                const p = document.createElement("p");
                p.textContent = tool;
                p.classList.add("pt");
                p.classList.add("container");
                p.classList.add("nhtile");
                p.addEventListener("click", () => {
                  p.classList.toggle("selected");
                });
                container.appendChild(p);
              });
            });
          fetch("http://10.200.1.172:8000/store-info/" + loc)
            .then((re) => re.json())
            .then((info) => {
              const title = document.getElementById("re-overlay-title");
              title.innerHTML = "Store Info";
              const cont = document.getElementById("re-overlay-content");
              cont.innerHTML = "";
              cont.style.display = "block";
              info.forEach((inf) => {
                const p = document.createElement("p");
                p.textContent = inf;
                p.classList.add("pt");
                p.classList.add("container");
                p.classList.add("nhtile");
                cont.appendChild(p);
              });
            });
          document.getElementById("rehire").style.display = 'flex';
          document.getElementById("re-overlay").style.display = 'flex';
        });
        // Create Job Tool
        document.getElementById('cr-jt-sub').addEventListener('click', function () {
                const tool = document.getElementById('cr-jt-text').value;
                fetch('http://10.200.1.172:8000/createtool?tool=' + tool)
                .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        return response.json();
                    })
                    .then(updatedResource => {
                        console.log(updatedResource.message);
                        alert(updatedResource.message);
                    })
                    .catch(error => {
                        console.error('There was a problem with the fetch operation: ', error);
                    });
                    
            });
        // Create Job Entry
        document.getElementById('cr-jtitle-sub').addEventListener('click', function() {
          const location = document.getElementById('cr-jtitle-text1').value;
          const title = document.getElementById('cr-jtitle-text2').value;
          fetch('http://10.200.1.172:8000/createtitle?title=' + title +'&location=' + location)
          .then(response => {
            if(!response.ok) {
              throw new Error('HTTP Error! Status: ${response.status}');
            }

            return response.json();
          })
          .then(updatedResource => {
            alert(updatedResource.message);
          })
          .catch(error => {
            console.error('There was a problem with the fetch operation: ', error);
          })
          
        });

        // Read All Jobs
        fetch('http://10.200.1.172:8000/alljobs')
        .then(res => res.json())
        .then(jobs => {
          const container = document.getElementById('read-jobs-cont');
          container.innerHTML = '';
          jobs.forEach(job => {
            const p = document.createElement('p');
            p.textContent = job;
            p.classList.add('pt');
            p.classList.add('container');
            container.appendChild(p);
          })
        });

        // Read Jobs by Location
        fetch('http://10.200.1.172:8000/locations')
        .then(res => res.json())
        .then(locs => {
          const dd = document.getElementById('read-jobs-location-select');
          dd.innerHTML = '<option value="">--Select--</option>';
          locs.forEach(loc => {
            const opt = document.createElement('option');
            opt.textContent = loc;
            opt.value = loc;
            dd.appendChild(opt);
          })
        });
        document.getElementById('read-jobs-location-select').addEventListener('change', function () {
          const location = this.value;
          fetch('http://10.200.1.172:8000/jobs/' + location)
          .then(res => res.json())
          .then(data => {
            const container = document.getElementById('read-jobs-location-cont');
            container.innerHTML = '';
            data.forEach(job => {
              const p = document.createElement('p');
              p.textContent = job;
              p.classList.add('pt');
              p.classList.add('container');
              container.appendChild(p);
            })
            document.getElementById('read-jobs-location-cont').style.display = 'inline-block';
          })
        });

        // Read All Tools
        fetch('http://10.200.1.172:8000/alltools')
            .then(res => res.json())
            .then(tools => {
                const container = document.getElementById('read-tools-cont');
                container.innerHTML = '';
                tools.forEach(tool => {
                    const p = document.createElement('p');
                    p.textContent = tool;
                    p.classList.add('pt');
                    p.classList.add('container');
                    container.appendChild(p);
                });
            });
        // Update Entry
        fetch('http://10.200.1.172:8000/locations')
                .then(res => res.json())
                .then(data => {
                    const locations = document.getElementById('update-loc');
                    locations.innerHTML = '<option value="">--Select--</option>';
                    data.forEach(loc => {
                        console.log("adding loc: ", loc);
                        let opt = document.createElement('option');
                        opt.value = loc;
                        opt.textContent = loc;
                        locations.appendChild(opt);
                    })
                });
        document.getElementById('update-loc').addEventListener('change', function () {
                const location = this.value;
                fetch('http://10.200.1.172:8000/jobs/' + location)
                    .then(res => res.json())
                    .then(data => {
                        const jobSelect = document.getElementById('update-title');
                        jobSelect.innerHTML = '<option value="">--Select--</option>';
                        data.forEach(job => {
                            console.log("adding job: ", job);
                            let opt = document.createElement('option');
                            opt.value = job;
                            opt.textContent = job;
                            let ch = document.createElement('input');
                            ch.type='checkbox';
                            jobSelect.appendChild(opt,ch);
                        })
                    })
            });
        fetch('http://10.200.1.172:8000/alltools')
                .then(res => res.json())
                .then(data => {
                    const checks = document.getElementById('update-checks');
                    data.forEach(tool => {
                        console.log("adding tool: ", tool);
                        let pa = document.createElement('p');
                        pa.classList.add('container');
                        pa.classList.add('tool-item')

                        let cb = document.createElement('input');
                        cb.type = 'checkbox';
                        cb.id = tool;
                        cb.value = tool;
                        cb.classList.add('cb');

                        let span = document.createElement('span');
                        span.textContent = tool;

                        pa.appendChild(cb);
                        pa.appendChild(span);

                        checks.appendChild(pa);
                    });
                });
        document.getElementById('update-title').addEventListener('change', function () {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                let location = document.getElementById('update-loc').value;
                let jobtitle = document.getElementById('update-title').value;
                checkboxes.forEach(box => {
                    box.checked = false;
                    fetch('http://10.200.1.172:8000/checktool?title=' + jobtitle + '&loc=' + location + '&tool=' + box.value)
                        .then(res => res.json())
                        .then(data => {
                            if(data[0]) {
                                box.checked = true;
                            }
                        });
                });
            });
        document.getElementById('update-sub').addEventListener('click', function () {
                const checkedTools = [];

                //Select all checkboxes by type
                var checkboxes = document.querySelectorAll('input[type="checkbox"]');

                checkboxes.forEach(cb => {
                    if (cb.checked) {
                        checkedTools.push(cb.value);
                    }
                });
                
                const endCheckedTools = [];
                const unCheckedTools = [];
                checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => {
                  if (cb.checked) {
                    endCheckedTools.push(cb.value);
                  } else {
                    unCheckedTools.push(cb.value);
                  }
                });
                endCheckedTools.forEach(ct => {
                  const d = {
                    title: document.getElementById('update-title').value,
                    location: document.getElementById('update-loc').value,
                    tool: ct,
                    flag: 1
                  };
                  fetch('http://10.200.1.172:8000/updatetool?title=' + d.title + '&loc=' + d.location + '&tool=' + d.tool + '&flag=' + d.flag)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        return response.json();
                    })
                    .then(updatedResource => {
                        console.log(updatedResource.message);
                    })
                    .catch(error => {
                        console.error('There was a problem with the fetch operation: ', error);
                    })
                });
                unCheckedTools.forEach(ct => {
                  const d = {
                    title: document.getElementById('update-title').value,
                    location: document.getElementById('update-loc').value,
                    tool: ct,
                    flag: 0
                  }
                  fetch('http://10.200.1.172:8000/updatetool?title=' + d.title + '&loc=' + d.location + '&tool=' + d.tool + '&flag=' + d.flag)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        return response.json();
                    })
                    .then(updatedResource => {
                        console.log(updatedResource.message);
                    })
                    .catch(error => {
                        console.error('There was a problem with the fetch operation: ', error);
                    })
                });  
            });   
            
            // Delete Tool
            fetch('http://10.200.1.172:8000/alltools')
        .then(res => res.json())
        .then(tools => {
            const sel = document.getElementById('delete-tool-sel');
            sel.innerHTML = '<option value="">--Select--</option>';
            tools.forEach(tool => {
                let opt = document.createElement('option');
                opt.value = tool;
                opt.textContent = tool;
                sel.appendChild(opt);
            })
        });
        document.getElementById('delete-tool-sub').addEventListener('click', function () {
          const tool = document.getElementById('delete-tool-sel').value;
          fetch('http://10.200.1.172:8000/deletetool?tool=' + tool)
          .then(response => {
            if(!response.ok) {
              throw new Error(`HTTP Error! status: ${response.status}`);
            }

            return response.json();
          })
          .then(updatedResource => {
            if(confirm(updatedResource.message)) {
              location.reload();
            } else {
              location.reload();
            }
          })
          .catch(error => {
            console.error(error.message);
          })
        });
        // Delete Title
        fetch('http://10.200.1.172:8000/locations')
                .then(res => res.json())
                .then(data => {
                    const locations = document.getElementById('delete-title-loc');
                    locations.innerHTML = '<option value="">--Select--</option>';
                    data.forEach(loc => {
                        console.log("adding loc: ", loc);
                        let opt = document.createElement('option');
                        opt.value = loc;
                        opt.textContent = loc;
                        locations.appendChild(opt);
                    })
                });
        document.getElementById('delete-title-loc').addEventListener('change', function () {
                const location = this.value;
                fetch('http://10.200.1.172:8000/jobs/' + location)
                    .then(res => res.json())
                    .then(data => {
                        const jobSelect = document.getElementById('delete-title-title');
                        jobSelect.innerHTML = '<option value="">--Select--</option>';
                        data.forEach(job => {
                            console.log("adding job: ", job);
                            let opt = document.createElement('option');
                            opt.value = job;
                            opt.textContent = job;
                            let ch = document.createElement('input');
                            ch.type='checkbox';
                            jobSelect.appendChild(opt,ch);
                        })
                    })
            });
        document.getElementById('delete-title-sub').addEventListener('click', function () {
          let job = document.getElementById('delete-title-title').value;
          let loc = document.getElementById('delete-title-loc').value;
          fetch('http://10.200.1.172:8000/deletetitle?title=' + job + '&location=' + loc)
          .then(response => {
            if(!response.ok) {
              throw new Error(`HTTP Error! Status: ${response.status}`);
            }

            return response.json();
          })
          .then(updatedResource => {
            console.log(updatedResource.message);
            if(confirm(updatedResource.message)) {
            location.reload();
          } else {
            location.reload();
          }
          })
          .catch(error => {
            console.error(updatedResource.message);
          })
          
        });
        
    </script>
  </body>
</html>
